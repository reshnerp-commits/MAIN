<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Awareness - AI Study Tool</title>
    <style>
        :root {
            --primary: #6366f1;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 2rem; display: flex; flex-direction: column; align-items: center; }
        
        /* Input Section */
        .generator-box {
            background: var(--card);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        input {
            width: 70%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            margin-right: 10px;
        }
        
        button {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
        }
        
        button:hover { opacity: 0.9; }
        button:disabled { background: #cbd5e1; cursor: not-allowed; }

        /* Tabs */
        .tabs { display: flex; gap: 1rem; margin-bottom: 1rem; }
        .tab-btn { background: transparent; color: var(--text); border: 1px solid #cbd5e1; }
        .tab-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Content Area */
        #content-area { width: 100%; max-width: 600px; min-height: 300px; }
        
        /* Flashcards */
        .card-container { perspective: 1000px; height: 200px; cursor: pointer; margin-bottom: 1rem; }
        .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-radius: 12px; }
        .card-container.flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; padding: 1rem; box-sizing: border-box; border-radius: 12px; background: white; border: 1px solid #e2e8f0; }
        .card-back { background: #eef2ff; color: var(--primary); transform: rotateY(180deg); font-weight: bold; }
        
        /* Quiz */
        .quiz-option { display: block; width: 100%; padding: 1rem; margin: 0.5rem 0; border: 1px solid #e2e8f0; border-radius: 8px; background: white; text-align: left; cursor: pointer; }
        .quiz-option:hover { background: #f1f5f9; }
        .quiz-option.correct { background: #dcfce7; border-color: #22c55e; }
        .quiz-option.wrong { background: #fee2e2; border-color: #ef4444; }

        .hidden { display: none; }
        .loading { color: #64748b; font-style: italic; }
    </style>
</head>
<body>

    <h1>üéì Digital Awareness AI</h1>
    <p>Enter a topic to generate flashcards and quizzes instantly.</p>

    <!-- Generator Input -->
    <div class="generator-box">
        <input type="text" id="topic-input" placeholder="e.g., Cybersecurity, Photosynthesis, History of Rome">
        <button onclick="generateContent()" id="gen-btn">Generate Study Set</button>
        <p id="status-msg" class="hidden"></p>
    </div>

    <!-- Navigation Tabs -->
    <div class="tabs hidden" id="nav-tabs">
        <button class="tab-btn active" onclick="switchView('flashcards')">Flashcards</button>
        <button class="tab-btn" onclick="switchView('quiz')">Quiz Mode</button>
    </div>

    <!-- Dynamic Content -->
    <div id="content-area"></div>

    <script>
        // ‚ö†Ô∏è REPLACE THIS WITH YOUR ACTUAL GOOGLE GEMINI API KEY
        const API_KEY = "AIzaSyBjM9pyMnRStjoogIpJ3rkyl358X5B_ntE"; 
        
        let studyData = [];
        let currentCardIndex = 0;

        async function generateContent() {
            const topic = document.getElementById('topic-input').value;
            const btn = document.getElementById('gen-btn');
            const status = document.getElementById('status-msg');
            const contentArea = document.getElementById('content-area');
            const tabs = document.getElementById('nav-tabs');

            if (!topic) return alert("Please enter a topic!");
            if (API_KEY === "AIzaSyBjM9pyMnRStjoogIpJ3rkyl358X5B_ntE") return alert("You need to add your API Key in the code!");

            // UI Loading State
            btn.disabled = true;
            btn.innerText = "Generating...";
            status.classList.remove('hidden');
            status.innerText = "AI is creating questions for " + topic + "...";
            contentArea.innerHTML = "";
            tabs.classList.add('hidden');

            try {
                // Call Google Gemini API
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Create 5 study flashcards about "${topic}". 
                                Return ONLY a valid JSON array. 
                                Format: [{"question": "Question text", "answer": "Answer text", "options": ["Wrong1", "Wrong2", "CorrectAnswer", "Wrong3"]}]
                                Ensure the correct answer is inside the options array.`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                // Parse the AI response
                let rawText = data.candidates[0].content.parts[0].text;
                // Clean up markdown code blocks if AI adds them
                rawText = rawText.replace(/```json/g, '').replace(/```/g, '').trim();
                
                studyData = JSON.parse(rawText);
                
                // Success UI
                status.innerText = "‚úÖ Generated successfully!";
                tabs.classList.remove('hidden');
                currentCardIndex = 0;
                renderFlashcard();

            } catch (error) {
                console.error(error);
                status.innerText = "‚ùå Error generating content. Check console or API key.";
            } finally {
                btn.disabled = false;
                btn.innerText = "Generate Study Set";
            }
        }

        // --- Flashcard Logic ---
        function renderFlashcard() {
            if (studyData.length === 0) return;
            const item = studyData[currentCardIndex];
            const container = document.getElementById('content-area');
            
            container.innerHTML = `
                <div class="card-container" onclick="this.classList.toggle('flipped')">
                    <div class="card-inner">
                        <div class="card-front"><h3>${item.question}</h3><p style="font-size:0.8rem; color:#999">(Click to flip)</p></div>
                        <div class="card-back"><h3>${item.answer}</h3></div>
                    </div>
                </div>
                <div style="text-align:center">
                    <button onclick="prevCard()">‚Üê Prev</button>
                    <span style="margin:0 1rem">${currentCardIndex + 1} / ${studyData.length}</span>
                    <button onclick="nextCard()">Next ‚Üí</button>
                </div>
            `;
        }

        function nextCard() {
            if (currentCardIndex < studyData.length - 1) {
                currentCardIndex++;
                renderFlashcard();
            }
        }

        function prevCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                renderFlashcard();
            }
        }

        // --- Quiz Logic ---
        function renderQuiz() {
            if (studyData.length === 0) return;
            const item = studyData[currentCardIndex];
            const container = document.getElementById('content-area');

            // Shuffle options for display
            const shuffledOptions = [...item.options].sort(() => Math.random() - 0.5);

            let optionsHtml = shuffledOptions.map(opt => 
                `<button class="quiz-option" onclick="checkAnswer(this, '${opt}', '${item.answer}')">${opt}</button>`
            ).join('');

            container.innerHTML = `
                <div style="background:white; padding:2rem; border-radius:12px; box-shadow:0 4px 6px rgba(0,0,0,0.1)">
                    <h3>Question ${currentCardIndex + 1}</h3>
                    <p style="font-size:1.2rem; margin:1rem 0">${item.question}</p>
                    <div>${optionsHtml}</div>
                    <div style="margin-top:1rem; display:flex; justify-content:space-between">
                        <button onclick="prevCard()">‚Üê Prev</button>
                        <button onclick="nextCard()">Next ‚Üí</button>
                    </div>
                </div>
            `;
        }

        function checkAnswer(btn, selected, correct) {
            // Disable all buttons in this question
            const allBtns = document.querySelectorAll('.quiz-option');
            allBtns.forEach(b => b.disabled = true);

            if (selected === correct) {
                btn.classList.add('correct');
                btn.innerText += " ‚úÖ";
            } else {
                btn.classList.add('wrong');
                btn.innerText += " ‚ùå";
                // Highlight correct one
                allBtns.forEach(b => {
                    if (b.innerText.includes(correct)) b.classList.add('correct');
                });
            }
        }

        // --- View Switcher ---
        function switchView(view) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            currentCardIndex = 0; // Reset to first card
            if (view === 'flashcards') renderFlashcard();
            else renderQuiz();
        }
    </script>
</body>
</html>
